<!DOCTYPE html>
<html lang="ru"> <!-- Указывает, что язык страницы - русский -->
<head>
    <meta charset="UTF-8"> <!-- Устанавливает кодировку документа на UTF-8 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Обеспечивает адаптивность страницы на мобильных устройствах -->
    <title>Бронирования</title> <!-- Заголовок страницы -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}"> <!-- Подключение внешнего CSS файла для стилизации -->
</head>
<body>
    <div class="container"> <!-- Основной контейнер для содержимого страницы -->
        <h1>
            {% if current_user.role in ['admin', 'manager'] %} <!-- Проверка, является ли текущий пользователь администратором или менеджером -->
                Бронирования клиентов <!-- Заголовок для администраторов и менеджеров -->
            {% else %}
                Мои бронирования <!-- Заголовок для обычных пользователей -->
            {% endif %}
        </h1>

        {% if reservations %} <!-- Проверка, есть ли бронирования -->
            <table class="table"> <!-- Таблица для отображения бронирований -->
                <thead>
                    <tr> <!-- Заголовок таблицы -->
                        <th>Имя клиента</th> <!-- Заголовок колонки для имени клиента -->
                        <th>Номер столика</th> <!-- Заголовок колонки для номера столика -->
                        <th>Дата и время</th> <!-- Заголовок колонки для даты и времени бронирования -->
                        <th>Количество человек</th> <!-- Заголовок колонки для количества человек -->
                        <th>Статус</th> <!-- Заголовок колонки для статуса бронирования -->
                        <th>Заказы</th> <!-- Заголовок колонки для заказов -->
                        {% if current_user.role not in ['admin', 'manager'] %} <!-- Проверка, является ли текущий пользователь не администратором и не менеджером -->
                            <th>Действия</th> <!-- Заголовок колонки для действий (например, отмена бронирования) -->
                        {% endif %}
                    </tr>
                </thead>
                <tbody>
                    {% for reservation in reservations %} <!-- Цикл для отображения каждого бронирования -->
                    <tr> <!-- Строка таблицы для одного бронирования -->
                        <td>{{ reservation.client_name }}</td> <!-- Имя клиента -->
                        <td>{{ reservation.table.number }}</td> <!-- Номер столика -->
                        <td>{{ reservation.reservation_datetime }}</td> <!-- Дата и время бронирования -->
                        <td>{{ reservation.number_of_people }}</td> <!-- Количество человек -->
                        <td>{{ reservation.status }}</td> <!-- Статус бронирования -->
                        <td>
                            <a href="{{ url_for('view_orders', reservation_id=reservation.id) }}" class="btn btn-info">Просмотреть заказы</a> <!-- Ссылка для просмотра заказов по бронированию -->
                        </td>
                        {% if current_user.role not in ['admin', 'manager'] %} <!-- Проверка, является ли текущий пользователь не администратором и не менеджером -->
                        <td>
                            <form action="{{ url_for('cancel_reservation', reservation_id=reservation.id) }}" method="POST" style="display:inline;"> <!-- Форма для отмены бронирования -->
                                <button type="submit" class="btn btn-danger" onclick="return confirm('Вы уверены, что хотите отменить это бронирование?');">Отменить</button> <!-- Кнопка для отмены бронирования с подтверждением -->
                            </form>
                        </td>
                        {% endif %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %} <!-- Если бронирований нет -->
            {% if current_user.role in ['admin', 'manager'] %} <!-- Проверка, является ли текущий пользователь администратором или менеджером -->
                <p>Бронирований на данный момент нету.</p> <!-- Сообщение для администраторов и менеджеров -->
            {% else %}
                <p>У вас нет бронирований в нашем ресторане.</p> <!-- Сообщение для обычных пользователей -->
            {% endif %}
        {% endif %}

        <a href="{{ url_for('index') }}" class="btn btn-secondary">Назад</a> <!-- Ссылка для возврата на главную страницу -->
    </div>
</body>
</html>
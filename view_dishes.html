<!DOCTYPE html>
<html lang="ru"> <!-- Указывает, что язык страницы - русский -->
<head>
    <meta charset="UTF-8"> <!-- Устанавливает кодировку документа на UTF-8 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Обеспечивает адаптивность страницы на мобильных устройствах -->
    <title>Меню блюд</title> <!-- Заголовок страницы -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}"> <!-- Подключение внешнего CSS файла для стилизации -->
    <style>
        /* Стили для изображений */
        table img {
            width: 100px; /* Фиксированная ширина изображения */
            height: 100px; /* Фиксированная высота изображения */
            object-fit: cover; /* Обеспечивает обрезку изображения, чтобы оно заполнило контейнер */
            border-radius: 5px; /* Закругленные углы */
        }
    </style>
</head>
<body>
<div class="container"> <!-- Основной контейнер для содержимого страницы -->
    <h1>Меню блюд</h1> <!-- Заголовок страницы -->
    <table class="table"> <!-- Таблица для отображения меню блюд -->
        <thead>
            <tr> <!-- Заголовок таблицы -->
                <th>Изображение</th> <!-- Заголовок колонки для изображения блюда -->
                <th>Название</th> <!-- Заголовок колонки для названия блюда -->
                <th>Описание</th> <!-- Заголовок колонки для описания блюда -->
                <th>Цена</th> <!-- Заголовок колонки для цены блюда -->
                {% if current_user.role == 'admin' %} <!-- Проверка, является ли текущий пользователь администратором -->
                    <th>Действия</th> <!-- Заголовок колонки для действий (редактирование и удаление) -->
                {% endif %}
            </tr>
        </thead>
        <tbody>
            {% for dish in dishes %} <!-- Цикл для отображения каждого блюда из списка -->
            <tr> <!-- Строка таблицы для одного блюда -->
                <td>
                    <img src="data:image/jpeg;base64,{{ dish.image_data|b64encode }}" alt="{{ dish.name }}"> <!-- Изображение блюда, закодированное в base64 -->
                </td>
                <td>{{ dish.name }}</td> <!-- Название блюда -->
                <td>{{ dish.description }}</td> <!-- Описание блюда -->
                <td>{{ dish.price }}₽</td> <!-- Цена блюда с символом рубля -->
                {% if current_user.role == 'admin' %} <!-- Проверка, является ли текущий пользователь администратором -->
                    <td> <!-- Ячейка для действий -->
                        <a href="{{ url_for('edit_dish', dish_id=dish.id) }}" class="btn btn-info">Редактировать</a> <!-- Ссылка для редактирования блюда -->
                        <form action="{{ url_for('delete_dish', dish_id=dish.id) }}" method="POST" style="display:inline;"> <!-- Форма для удаления блюда -->
                            <button type="submit" class="btn btn-danger" onclick="return confirm('Вы уверены, что хотите удалить это блюдо?');">Удалить</button> <!-- Кнопка для удаления блюда с подтверждением -->
                        </form>
                    </td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <a href="{{ url_for('index') }}" class="btn btn-secondary">Назад</a> <!-- Ссылка для возврата на главную страницу -->
</div>
</body>
</html>